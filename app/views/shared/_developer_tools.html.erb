<% if Rails.env.development? %>
  <div class="developer-tools fixed bottom-4 right-4 bg-warm-white border-2 border-cream rounded-xl shadow-xl p-4 z-50 max-w-xs">
    <div class="flex items-center justify-between mb-3">
      <h4 class="text-sm font-bold text-dark">üõ†Ô∏è Dev Tools</h4>
      <button onclick="toggleDevTools()" class="text-xs text-medium hover:text-dark">
        <span id="dev-toggle">‚àí</span>
      </button>
    </div>
    
    <div id="dev-tools-content" class="space-y-2">
      <!-- Fill current category with random values -->
      <% if defined?(@category) && @category.present? %>
        <%= form_with url: "/cuestionario/dev/fill_random_current", method: :post, local: true, class: "w-full" do |form| %>
          <%= hidden_field_tag :category_id, @category.identifier %>
          <%= form.submit "üé≤ Llenar #{@category.name}", 
              class: "dev-btn-coral block w-full text-left px-3 py-2 text-xs rounded-lg cursor-pointer transition-all duration-200 font-bold" %>
        <% end %>
      <% end %>

      <!-- Fill all questions with random values -->
      <%= form_with url: "/cuestionario/dev/fill_random", method: :post, local: true, class: "w-full" do |form| %>
        <%= form.submit "üéØ Llenar Todo Aleatorio", 
            class: "dev-btn-green block w-full text-left px-3 py-2 text-xs rounded-lg cursor-pointer transition-all duration-200 font-bold" %>
      <% end %>

      <!-- Clear session -->
      <%= form_with url: "/cuestionario/dev/clear", method: :delete, local: true, class: "w-full" do |form| %>
        <%= form.submit "üóëÔ∏è Limpiar Sesi√≥n", 
            class: "dev-btn-yellow block w-full text-left px-3 py-2 text-xs rounded-lg cursor-pointer transition-all duration-200 font-bold" %>
      <% end %>

      <!-- Show results (fills missing with random) -->
      <%= link_to "/cuestionario/dev/show_results", 
          class: "dev-btn-blue block w-full text-center px-3 py-2 text-xs rounded-lg transition-all duration-200 font-bold" do %>
        üìä Ver Resultados
      <% end %>

      <!-- Session info -->
      <div class="text-xs text-medium mt-3 pt-3 border-t border-cream">
        <% answers_count = (session[:questionnaire_answers] || {}).count %>
        <% total_questions = Question.count %>
        <% categories_count = Category.count %>
        <div>üìù Respuestas: <%= answers_count %>/<%= total_questions %></div>
        <div>üìÇ <%= categories_count %> categor√≠as</div>
        <% if defined?(@category) && @category.present? %>
          <div>üìç <%= @category.name %></div>
        <% end %>
      </div>
    </div>
  </div>

  <script>
    function toggleDevTools() {
      const content = document.getElementById('dev-tools-content');
      const toggle = document.getElementById('dev-toggle');
      
      if (content.style.display === 'none') {
        content.style.display = 'block';
        toggle.textContent = '‚àí';
      } else {
        content.style.display = 'none';
        toggle.textContent = '+';
      }
    }
  </script>

  <style>
    .developer-tools {
      font-family: 'Simonetta', serif;
    }
    
    .developer-tools input[type="submit"],
    .developer-tools a {
      border: none;
      text-decoration: none;
    }
    
    .developer-tools input[type="submit"]:hover,
    .developer-tools a:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    /* Developer Tools Button Colors - Light Background, Dark Text */
    .dev-btn-coral {
      background-color: #fef2f2;
      border: 2px solid #dc2626;
      color: #dc2626;
    }
    
    .dev-btn-coral:hover {
      background-color: #fecaca;
      border-color: #b91c1c;
      color: #b91c1c;
    }
    
    .dev-btn-green {
      background-color: #f0fdf4;
      border: 2px solid #16a34a;
      color: #16a34a;
    }
    
    .dev-btn-green:hover {
      background-color: #bbf7d0;
      border-color: #15803d;
      color: #15803d;
    }
    
    .dev-btn-yellow {
      background-color: #fefce8;
      border: 2px solid #eab308;
      color: #a16207;
    }
    
    .dev-btn-yellow:hover {
      background-color: #fef3c7;
      border-color: #ca8a04;
      color: #92400e;
    }
    
    .dev-btn-blue {
      background-color: #eff6ff;
      border: 2px solid #2563eb;
      color: #2563eb;
    }
    
    .dev-btn-blue:hover {
      background-color: #dbeafe;
      border-color: #1d4ed8;
      color: #1d4ed8;
    }
  </style>
<% end %>